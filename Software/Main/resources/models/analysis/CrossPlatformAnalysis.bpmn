<?xml version="1.0" encoding="UTF-8"?> 
<definitions id="Definition"
             targetNamespace="http://www.jboss.org/drools"
             typeLanguage="http://www.java.com/javaTypes"
             expressionLanguage="http://www.mvel.org/2.0"
             xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd"
             xmlns:g="http://www.jboss.org/drools/flow/gpd"
             xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
             xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"
             xmlns:di="http://www.omg.org/spec/DD/20100524/DI"
             xmlns:tns="http://www.jboss.org/drools">

  <itemDefinition id="_envVarGroupsItem" structureRef="java.util.List" />
  <itemDefinition id="_mpiProcsConfigItem" structureRef="String" />
  <itemDefinition id="_ompThreadsConfigItem" structureRef="String" />
  <itemDefinition id="_hpcSystemItem" structureRef="String" />
  <itemDefinition id="_perfToolItem" structureRef="String" />
  <itemDefinition id="_configOKItem" structureRef="String" />
  <itemDefinition id="_experimentsItem" structureRef="java.util.List" />
  <itemDefinition id="_workingFolderItem" structureRef="String" />
  <itemDefinition id="_expCommentItem" structureRef="String" />
  <itemDefinition id="_hpcSystemsItem" structureRef="java.util.List" />
  <itemDefinition id="_applicationItem" structureRef="String" />
  <itemDefinition id="_numArrayElemsRangeItem" structureRef="String" />

  <itemDefinition id="_34-envVarGroupsItem" structureRef="java.util.List" />
  <itemDefinition id="_34-mpiProcsConfigItem" structureRef="String" />
  <itemDefinition id="_34-ompThreadsConfigItem" structureRef="String" />
  <itemDefinition id="_34-hpcSystemItem" structureRef="String" />
  <itemDefinition id="_34-perfToolItem" structureRef="String" />
  <itemDefinition id="_34-configOKItem" structureRef="String" />
  <itemDefinition id="_34-experimentsItem" structureRef="java.util.List" />
  <itemDefinition id="_34-workingFolderItem" structureRef="String" />
  <itemDefinition id="_34-expCommentItem" structureRef="String" />
  <itemDefinition id="_34-hpcSystemsItem" structureRef="java.util.List" />
  <itemDefinition id="_34-applicationItem" structureRef="String" />
  <itemDefinition id="_34-numArrayElemsRangeItem" structureRef="String" />

  <itemDefinition id="_35-envVarGroupsItem" structureRef="java.util.List" />
  <itemDefinition id="_35-mpiProcsConfigItem" structureRef="String" />
  <itemDefinition id="_35-ompThreadsConfigItem" structureRef="String" />
  <itemDefinition id="_35-hpcSystemItem" structureRef="String" />
  <itemDefinition id="_35-perfToolItem" structureRef="String" />
  <itemDefinition id="_35-configOKItem" structureRef="String" />
  <itemDefinition id="_35-experimentsItem" structureRef="java.util.List" />
  <itemDefinition id="_35-workingFolderItem" structureRef="String" />
  <itemDefinition id="_35-expCommentItem" structureRef="String" />
  <itemDefinition id="_35-hpcSystemsItem" structureRef="java.util.List" />
  <itemDefinition id="_35-applicationItem" structureRef="String" />
  <itemDefinition id="_35-numArrayElemsRangeItem" structureRef="String" />

  <itemDefinition id="_32-2-1-hpcSystemItem" />

  <itemDefinition id="_32-2-3-hpcSystemItem" />

  <itemDefinition id="_32-2-11-batchSysManagerItem" structureRef="pathway.eclipse.remotetools.BatchSystemManager" />
  <itemDefinition id="_32-2-11-connManagerItem" structureRef="pathway.eclipse.remotetools.ConnectionManager" />
  <itemDefinition id="_32-2-11-experimentItem" structureRef="pathway.data.persistence.Experiment" />

  <itemDefinition id="_32-2-11-2-batchSysManagerItem" structureRef="pathway.eclipse.remotetools.BatchSystemManager" />
  <itemDefinition id="_32-2-11-2-connManagerItem" structureRef="pathway.eclipse.remotetools.ConnectionManager" />
  <itemDefinition id="_32-2-11-2-experimentItem" structureRef="pathway.data.persistence.Experiment" />

  <itemDefinition id="_32-2-11-3-2-1-experimentItem" />

  <itemDefinition id="_32-2-11-3-2-2-experimentItem" />

  <itemDefinition id="_32-2-13-hpcSystemItem" />

  <itemDefinition id="_36-envVarGroupsItem" structureRef="java.util.List" />
  <itemDefinition id="_36-mpiProcsConfigItem" structureRef="String" />
  <itemDefinition id="_36-ompThreadsConfigItem" structureRef="String" />
  <itemDefinition id="_36-hpcSystemItem" structureRef="String" />
  <itemDefinition id="_36-perfToolItem" structureRef="String" />
  <itemDefinition id="_36-configOKItem" structureRef="String" />
  <itemDefinition id="_36-experimentsItem" structureRef="java.util.List" />
  <itemDefinition id="_36-workingFolderItem" structureRef="String" />
  <itemDefinition id="_36-expCommentItem" structureRef="String" />
  <itemDefinition id="_36-hpcSystemsItem" structureRef="java.util.List" />
  <itemDefinition id="_36-applicationItem" structureRef="String" />
  <itemDefinition id="_36-numArrayElemsRangeItem" structureRef="String" />

  <itemDefinition id="_23-envVarGroupsItem" structureRef="java.util.List" />
  <itemDefinition id="_23-mpiProcsConfigItem" structureRef="String" />
  <itemDefinition id="_23-ompThreadsConfigItem" structureRef="String" />
  <itemDefinition id="_23-hpcSystemItem" structureRef="String" />
  <itemDefinition id="_23-perfToolItem" structureRef="String" />
  <itemDefinition id="_23-configOKItem" structureRef="String" />
  <itemDefinition id="_23-experimentsItem" structureRef="java.util.List" />
  <itemDefinition id="_23-workingFolderItem" structureRef="String" />
  <itemDefinition id="_23-expCommentItem" structureRef="String" />
  <itemDefinition id="_23-hpcSystemsItem" structureRef="java.util.List" />
  <itemDefinition id="_23-applicationItem" structureRef="String" />
  <itemDefinition id="_23-numArrayElemsRangeItem" structureRef="String" />

  <itemDefinition id="_30-envVarGroupsItem" structureRef="java.util.List" />
  <itemDefinition id="_30-mpiProcsConfigItem" structureRef="String" />
  <itemDefinition id="_30-ompThreadsConfigItem" structureRef="String" />
  <itemDefinition id="_30-hpcSystemItem" structureRef="String" />
  <itemDefinition id="_30-perfToolItem" structureRef="String" />
  <itemDefinition id="_30-configOKItem" structureRef="String" />
  <itemDefinition id="_30-experimentsItem" structureRef="java.util.List" />
  <itemDefinition id="_30-workingFolderItem" structureRef="String" />
  <itemDefinition id="_30-expCommentItem" structureRef="String" />
  <itemDefinition id="_30-hpcSystemsItem" structureRef="java.util.List" />
  <itemDefinition id="_30-applicationItem" structureRef="String" />
  <itemDefinition id="_30-numArrayElemsRangeItem" structureRef="String" />

  <itemDefinition id="_32_multiInstanceItemType" />

  <itemDefinition id="_32-2-11-3_multiInstanceItemType" />

  <itemDefinition id="_32-2-11-4_multiInstanceItemType" />

  <process processType="Private" isExecutable="true" id="pathway.workflows.analysis.CrossPlatform" name="Cross-Platform Analysis Process" tns:packageName="defaultPackage" >

    <extensionElements>
     <tns:import name="javax.swing.JOptionPane" />
     <tns:import name="pathway.ui.dialogs.*" />
     <tns:import name="java.util.List" />
     <tns:import name="java.util.ArrayList" />
     <tns:import name="pathway.utils.PrepareExperimentsList" />
     <tns:import name="pathway.data.persistence.Experiment" />
     <tns:import name="pathway.eclipse.remotetools.BatchSystemManager" />
     <tns:import name="pathway.eclipse.remotetools.ConnectionManager" />
     <tns:import name="org.eclipse.ptp.core.jobs.IJobStatus" />
     <tns:import name="pathway.data.DataUtils" />
     <tns:import name="pathway.data.JobResults" />
     <tns:import name="org.jbpm.workflow.instance.node.WorkItemNodeInstance" />
    </extensionElements>
    <!-- process variables -->
    <property id="envVarGroups" itemSubjectRef="_envVarGroupsItem"/>
    <property id="mpiProcsConfig" itemSubjectRef="_mpiProcsConfigItem"/>
    <property id="ompThreadsConfig" itemSubjectRef="_ompThreadsConfigItem"/>
    <property id="hpcSystem" itemSubjectRef="_hpcSystemItem"/>
    <property id="perfTool" itemSubjectRef="_perfToolItem"/>
    <property id="configOK" itemSubjectRef="_configOKItem"/>
    <property id="experiments" itemSubjectRef="_experimentsItem"/>
    <property id="workingFolder" itemSubjectRef="_workingFolderItem"/>
    <property id="expComment" itemSubjectRef="_expCommentItem"/>
    <property id="hpcSystems" itemSubjectRef="_hpcSystemsItem"/>
    <property id="application" itemSubjectRef="_applicationItem"/>
    <property id="numArrayElemsRange" itemSubjectRef="_numArrayElemsRangeItem"/>

    <!-- nodes -->
    <task id="_34" name="Perf Tool?" tns:taskName="SelectPerformanceTool" >
      <ioSpecification>
        <dataOutput id="_34_PerfToolOutput" name="PerfTool" />
        <inputSet>
        </inputSet>
        <outputSet>
          <dataOutputRefs>_34_PerfToolOutput</dataOutputRefs>
        </outputSet>
      </ioSpecification>
      <dataOutputAssociation>
        <sourceRef>_34_PerfToolOutput</sourceRef>
        <targetRef>perfTool</targetRef>
      </dataOutputAssociation>
    </task>
    <task id="_35" name="MPI/OMP Config" tns:taskName="ProcThreadsConfig" >
      <ioSpecification>
        <dataOutput id="_35_OMPThreadsOutput" name="OMPThreads" />
        <dataOutput id="_35_MPIProcsOutput" name="MPIProcs" />
        <inputSet>
        </inputSet>
        <outputSet>
          <dataOutputRefs>_35_OMPThreadsOutput</dataOutputRefs>
          <dataOutputRefs>_35_MPIProcsOutput</dataOutputRefs>
        </outputSet>
      </ioSpecification>
      <dataOutputAssociation>
        <sourceRef>_35_OMPThreadsOutput</sourceRef>
        <targetRef>ompThreadsConfig</targetRef>
      </dataOutputAssociation>
      <dataOutputAssociation>
        <sourceRef>_35_MPIProcsOutput</sourceRef>
        <targetRef>mpiProcsConfig</targetRef>
      </dataOutputAssociation>
    </task>
    <startEvent id="_1" name="StartProcess" />
    <subProcess id="_32" name="Foreach HPC System"  >
      <ioSpecification>
        <dataInput id="_32_input" name="MultiInstanceInput" />
        <inputSet/>
        <outputSet/>
      </ioSpecification>
      <dataInputAssociation>
        <sourceRef>hpcSystems</sourceRef>
        <targetRef>_32_input</targetRef>
      </dataInputAssociation>
      <multiInstanceLoopCharacteristics>
        <loopDataInputRef>_32_input</loopDataInputRef>
        <inputDataItem id="hpcSystem" itemSubjectRef="_32_multiInstanceItemType"/>
      </multiInstanceLoopCharacteristics>
    <!-- nodes -->
    <task id="_32-2-1" name="Select STREAM" tns:taskName="AppConfig" >
      <ioSpecification>
        <dataOutput id="_32-2-1_ApplicationOutput" name="Application" />
        <inputSet>
        </inputSet>
        <outputSet>
          <dataOutputRefs>_32-2-1_ApplicationOutput</dataOutputRefs>
        </outputSet>
      </ioSpecification>
      <dataOutputAssociation>
        <sourceRef>_32-2-1_ApplicationOutput</sourceRef>
        <targetRef>application</targetRef>
      </dataOutputAssociation>
    </task>
    <startEvent id="_32-2-2" name="Start" />
    <task id="_32-2-3" name="Create Experiments" tns:taskName="CreateExperiments" >
      <ioSpecification>
        <dataInput id="_32-2-3_PerfToolInput" name="PerfTool" />
        <dataInput id="_32-2-3_OMPThreadsInput" name="OMPThreads" />
        <dataInput id="_32-2-3_EnvVarGroupsInput" name="EnvVarGroups" />
        <dataInput id="_32-2-3_ApplicationInput" name="Application" />
        <dataInput id="_32-2-3_MPIProcsInput" name="MPIProcs" />
        <dataInput id="_32-2-3_HPCSystemInput" name="HPCSystem" />
        <dataInput id="_32-2-3_OMPThreadsInput" name="OMPThreads" />
        <dataInput id="_32-2-3_MPIProcsInput" name="MPIProcs" />
        <dataInput id="_32-2-3_ExpTypeInput" name="ExpType" />
        <dataOutput id="_32-2-3_ExperimentsOutput" name="Experiments" />
        <dataOutput id="_32-2-3_ConfigOKOutput" name="ConfigOK" />
        <inputSet>
          <dataInputRefs>_32-2-3_PerfToolInput</dataInputRefs>
          <dataInputRefs>_32-2-3_OMPThreadsInput</dataInputRefs>
          <dataInputRefs>_32-2-3_EnvVarGroupsInput</dataInputRefs>
          <dataInputRefs>_32-2-3_ApplicationInput</dataInputRefs>
          <dataInputRefs>_32-2-3_MPIProcsInput</dataInputRefs>
          <dataInputRefs>_32-2-3_HPCSystemInput</dataInputRefs>
          <dataInputRefs>_32-2-3_OMPThreadsInput</dataInputRefs>
          <dataInputRefs>_32-2-3_MPIProcsInput</dataInputRefs>
          <dataInputRefs>_32-2-3_ExpTypeInput</dataInputRefs>
        </inputSet>
        <outputSet>
          <dataOutputRefs>_32-2-3_ExperimentsOutput</dataOutputRefs>
          <dataOutputRefs>_32-2-3_ConfigOKOutput</dataOutputRefs>
        </outputSet>
      </ioSpecification>
      <dataInputAssociation>
        <sourceRef>perfTool</sourceRef>
        <targetRef>_32-2-3_PerfToolInput</targetRef>
      </dataInputAssociation>
      <dataInputAssociation>
        <sourceRef>ompThreadsConfig</sourceRef>
        <targetRef>_32-2-3_OMPThreadsInput</targetRef>
      </dataInputAssociation>
      <dataInputAssociation>
        <sourceRef>envVarGroups</sourceRef>
        <targetRef>_32-2-3_EnvVarGroupsInput</targetRef>
      </dataInputAssociation>
      <dataInputAssociation>
        <sourceRef>application</sourceRef>
        <targetRef>_32-2-3_ApplicationInput</targetRef>
      </dataInputAssociation>
      <dataInputAssociation>
        <sourceRef>mpiProcsConfig</sourceRef>
        <targetRef>_32-2-3_MPIProcsInput</targetRef>
      </dataInputAssociation>
      <dataInputAssociation>
        <sourceRef>hpcSystem</sourceRef>
        <targetRef>_32-2-3_HPCSystemInput</targetRef>
      </dataInputAssociation>
      <dataInputAssociation>
        <targetRef>_32-2-3_OMPThreadsInput</targetRef>
        <assignment>
          <from xsi:type="tFormalExpression">1</from>
          <to xsi:type="tFormalExpression">_32-2-3_OMPThreadsInput</to>
        </assignment>
      </dataInputAssociation>
      <dataInputAssociation>
        <targetRef>_32-2-3_MPIProcsInput</targetRef>
        <assignment>
          <from xsi:type="tFormalExpression">1</from>
          <to xsi:type="tFormalExpression">_32-2-3_MPIProcsInput</to>
        </assignment>
      </dataInputAssociation>
      <dataInputAssociation>
        <targetRef>_32-2-3_ExpTypeInput</targetRef>
        <assignment>
          <from xsi:type="tFormalExpression">Cross-Platform Memory Analysis</from>
          <to xsi:type="tFormalExpression">_32-2-3_ExpTypeInput</to>
        </assignment>
      </dataInputAssociation>
      <dataOutputAssociation>
        <sourceRef>_32-2-3_ExperimentsOutput</sourceRef>
        <targetRef>experiments</targetRef>
      </dataOutputAssociation>
      <dataOutputAssociation>
        <sourceRef>_32-2-3_ConfigOKOutput</sourceRef>
        <targetRef>configOK</targetRef>
      </dataOutputAssociation>
    </task>
    <exclusiveGateway id="_32-2-4" name="ConfigOK?" gatewayDirection="Diverging" />
    <endEvent id="_32-2-5" name="EndIter" />
    <endEvent id="_32-2-6" name="EndAll" >
        <terminateEventDefinition/>
    </endEvent>
    <scriptTask id="_32-2-7" name="Study Cancelled" scriptFormat="http://www.java.com/java" >
      <script>JOptionPane.showMessageDialog(null, "Analysis was cancelled!");</script>
    </scriptTask>
    <scriptTask id="_32-2-8" name="Start" scriptFormat="http://www.java.com/java" >
      <script>JOptionPane.showMessageDialog(null, "Starting simulation for " + (experiments != null ? experiments.size() : 0) + " experiments");</script>
    </scriptTask>
    <scriptTask id="_32-2-10" name="Start Config" >
      <script>JOptionPane.showMessageDialog(null, "Starting configuration for sytem: " + hpcSystem);</script>
    </scriptTask>
    <subProcess id="_32-2-11" name="Submit and Monitor Experiments"  >
    <!-- variables -->
    <property id="batchSysManager" itemSubjectRef="_32-2-11-batchSysManagerItem"/>
    <property id="connManager" itemSubjectRef="_32-2-11-connManagerItem"/>
    <property id="experiment" itemSubjectRef="_32-2-11-experimentItem"/>
    <!-- nodes -->
    <startEvent id="_32-2-11-1" name="Start" />
    <task id="_32-2-11-2" name="Create System Manager" tns:taskName="CreateBatchSystemManager" >
      <extensionElements>
        <tns:onEntry-script scriptFormat="http://www.java.com/java">
          <script>kcontext.setVariable("experiment", experiments.get(0) );</script>
        </tns:onEntry-script>
      </extensionElements>
      <ioSpecification>
        <dataInput id="_32-2-11-2_ExperimentInput" name="Experiment" />
        <dataOutput id="_32-2-11-2_BatchSysManagerOutput" name="BatchSysManager" />
        <dataOutput id="_32-2-11-2_ConnectionOutput" name="Connection" />
        <inputSet>
          <dataInputRefs>_32-2-11-2_ExperimentInput</dataInputRefs>
        </inputSet>
        <outputSet>
          <dataOutputRefs>_32-2-11-2_BatchSysManagerOutput</dataOutputRefs>
          <dataOutputRefs>_32-2-11-2_ConnectionOutput</dataOutputRefs>
        </outputSet>
      </ioSpecification>
      <dataInputAssociation>
        <sourceRef>experiment</sourceRef>
        <targetRef>_32-2-11-2_ExperimentInput</targetRef>
      </dataInputAssociation>
      <dataOutputAssociation>
        <sourceRef>_32-2-11-2_BatchSysManagerOutput</sourceRef>
        <targetRef>batchSysManager</targetRef>
      </dataOutputAssociation>
      <dataOutputAssociation>
        <sourceRef>_32-2-11-2_ConnectionOutput</sourceRef>
        <targetRef>connManager</targetRef>
      </dataOutputAssociation>
    </task>
    <subProcess id="_32-2-11-3" name="Prepare and Run Experiments"  >
      <ioSpecification>
        <dataInput id="_32-2-11-3_input" name="MultiInstanceInput" />
        <inputSet/>
        <outputSet/>
      </ioSpecification>
      <dataInputAssociation>
        <sourceRef>experiments</sourceRef>
        <targetRef>_32-2-11-3_input</targetRef>
      </dataInputAssociation>
      <multiInstanceLoopCharacteristics>
        <loopDataInputRef>_32-2-11-3_input</loopDataInputRef>
        <inputDataItem id="experiment" itemSubjectRef="_32-2-11-3_multiInstanceItemType"/>
      </multiInstanceLoopCharacteristics>
    <!-- nodes -->
    <task id="_32-2-11-3-2-1" name="Instrument Code" tns:taskName="InstrumentCode" >
      <ioSpecification>
        <dataInput id="_32-2-11-3-2-1_BatchSysManagerInput" name="BatchSysManager" />
        <dataInput id="_32-2-11-3-2-1_ExperimentInput" name="Experiment" />
        <inputSet>
          <dataInputRefs>_32-2-11-3-2-1_BatchSysManagerInput</dataInputRefs>
          <dataInputRefs>_32-2-11-3-2-1_ExperimentInput</dataInputRefs>
        </inputSet>
        <outputSet>
        </outputSet>
      </ioSpecification>
      <dataInputAssociation>
        <sourceRef>batchSysManager</sourceRef>
        <targetRef>_32-2-11-3-2-1_BatchSysManagerInput</targetRef>
      </dataInputAssociation>
      <dataInputAssociation>
        <sourceRef>experiment</sourceRef>
        <targetRef>_32-2-11-3-2-1_ExperimentInput</targetRef>
      </dataInputAssociation>
    </task>
    <task id="_32-2-11-3-2-2" name="Run Experiment" tns:taskName="RunExperiment" >
      <ioSpecification>
        <dataInput id="_32-2-11-3-2-2_BatchSysManagerInput" name="BatchSysManager" />
        <dataInput id="_32-2-11-3-2-2_ExperimentInput" name="Experiment" />
        <inputSet>
          <dataInputRefs>_32-2-11-3-2-2_BatchSysManagerInput</dataInputRefs>
          <dataInputRefs>_32-2-11-3-2-2_ExperimentInput</dataInputRefs>
        </inputSet>
        <outputSet>
        </outputSet>
      </ioSpecification>
      <dataInputAssociation>
        <sourceRef>batchSysManager</sourceRef>
        <targetRef>_32-2-11-3-2-2_BatchSysManagerInput</targetRef>
      </dataInputAssociation>
      <dataInputAssociation>
        <sourceRef>experiment</sourceRef>
        <targetRef>_32-2-11-3-2-2_ExperimentInput</targetRef>
      </dataInputAssociation>
    </task>
    <startEvent id="_32-2-11-3-2-3" name="Start" />
    <endEvent id="_32-2-11-3-2-4" name="End" />
    <!-- connections -->
    <sequenceFlow id="_32-2-11-3-2-3-_32-2-11-3-2-1" sourceRef="_32-2-11-3-2-3" targetRef="_32-2-11-3-2-1" />
    <sequenceFlow id="_32-2-11-3-2-1-_32-2-11-3-2-2" sourceRef="_32-2-11-3-2-1" targetRef="_32-2-11-3-2-2" />
    <sequenceFlow id="_32-2-11-3-2-2-_32-2-11-3-2-4" sourceRef="_32-2-11-3-2-2" targetRef="_32-2-11-3-2-4" />
    </subProcess>
    <subProcess id="_32-2-11-4" name="Monitor Experiments and Get Results"  >
      <ioSpecification>
        <dataInput id="_32-2-11-4_input" name="MultiInstanceInput" />
        <inputSet/>
        <outputSet/>
      </ioSpecification>
      <dataInputAssociation>
        <sourceRef>experiments</sourceRef>
        <targetRef>_32-2-11-4_input</targetRef>
      </dataInputAssociation>
      <multiInstanceLoopCharacteristics>
        <loopDataInputRef>_32-2-11-4_input</loopDataInputRef>
        <inputDataItem id="experiment" itemSubjectRef="_32-2-11-4_multiInstanceItemType"/>
      </multiInstanceLoopCharacteristics>
    <!-- nodes -->
    <scriptTask id="_32-2-11-4-2-1" name="Get Experiment and Store to DB" scriptFormat="http://www.java.com/java" >
      <script>JobResults jobResults = batchSysManager.getJobResultsBlocking(((Experiment)experiment).getJobId());
jobResults.storeResultsToExperiment((Experiment)experiment);

DataUtils.StoreExperiment((Experiment) experiment);</script>
    </scriptTask>
    <startEvent id="_32-2-11-4-2-2" name="Start" />
    <endEvent id="_32-2-11-4-2-3" name="End" />
    <!-- connections -->
    <sequenceFlow id="_32-2-11-4-2-2-_32-2-11-4-2-1" sourceRef="_32-2-11-4-2-2" targetRef="_32-2-11-4-2-1" />
    <sequenceFlow id="_32-2-11-4-2-1-_32-2-11-4-2-3" sourceRef="_32-2-11-4-2-1" targetRef="_32-2-11-4-2-3" />
    </subProcess>
    <scriptTask id="_32-2-11-5" name="Close the Batch System Manager" scriptFormat="http://www.java.com/java" >
      <script>batchSysManager.stopScheduler();</script>
    </scriptTask>
    <endEvent id="_32-2-11-6" name="End" />
    <!-- connections -->
    <sequenceFlow id="_32-2-11-1-_32-2-11-2" sourceRef="_32-2-11-1" targetRef="_32-2-11-2" />
    <sequenceFlow id="_32-2-11-2-_32-2-11-3" sourceRef="_32-2-11-2" targetRef="_32-2-11-3" />
    <sequenceFlow id="_32-2-11-3-_32-2-11-4" sourceRef="_32-2-11-3" targetRef="_32-2-11-4" />
    <sequenceFlow id="_32-2-11-4-_32-2-11-5" sourceRef="_32-2-11-4" targetRef="_32-2-11-5" />
    <sequenceFlow id="_32-2-11-5-_32-2-11-6" sourceRef="_32-2-11-5" targetRef="_32-2-11-6" />
    </subProcess>
    <scriptTask id="_32-2-12" name="Set Benchmark Config" scriptFormat="http://www.java.com/java" >
      <script>List&lt;Integer&gt; memSizes = PrepareExperimentsList.parseRangeConfig(numArrayElemsRange);
List&lt;String&gt; envVars =  new ArrayList&lt;String&gt;(memSizes.size());

for (Integer numElems : memSizes) {
 envVars.add("STREAM_ARRAY_SIZE=" + numElems);
}

kcontext.setVariable("envVarGroups", envVars);</script>
    </scriptTask>
    <task id="_32-2-13" name="Num. Elems in Array?" tns:taskName="AskQuestion" >
      <ioSpecification>
        <dataInput id="_32-2-13_QuestionInput" name="Question" />
        <dataInput id="_32-2-13_DefaultValueInput" name="DefaultValue" />
        <dataInput id="_32-2-13_TitleInput" name="Title" />
        <dataOutput id="_32-2-13_AnswerOutput" name="Answer" />
        <inputSet>
          <dataInputRefs>_32-2-13_QuestionInput</dataInputRefs>
          <dataInputRefs>_32-2-13_DefaultValueInput</dataInputRefs>
          <dataInputRefs>_32-2-13_TitleInput</dataInputRefs>
        </inputSet>
        <outputSet>
          <dataOutputRefs>_32-2-13_AnswerOutput</dataOutputRefs>
        </outputSet>
      </ioSpecification>
      <dataInputAssociation>
        <targetRef>_32-2-13_QuestionInput</targetRef>
        <assignment>
          <from xsi:type="tFormalExpression">"Please enter the size of the array used by STREAM or the range in the format (start:end:incr mult)"</from>
          <to xsi:type="tFormalExpression">_32-2-13_QuestionInput</to>
        </assignment>
      </dataInputAssociation>
      <dataInputAssociation>
        <targetRef>_32-2-13_DefaultValueInput</targetRef>
        <assignment>
          <from xsi:type="tFormalExpression">"100000:12800000:2"</from>
          <to xsi:type="tFormalExpression">_32-2-13_DefaultValueInput</to>
        </assignment>
      </dataInputAssociation>
      <dataInputAssociation>
        <targetRef>_32-2-13_TitleInput</targetRef>
        <assignment>
          <from xsi:type="tFormalExpression">STREAM_ARRAY_SIZE?</from>
          <to xsi:type="tFormalExpression">_32-2-13_TitleInput</to>
        </assignment>
      </dataInputAssociation>
      <dataOutputAssociation>
        <sourceRef>_32-2-13_AnswerOutput</sourceRef>
        <targetRef>numArrayElemsRange</targetRef>
      </dataOutputAssociation>
    </task>
    <!-- connections -->
    <sequenceFlow id="_32-2-10-_32-2-1" sourceRef="_32-2-10" targetRef="_32-2-1" />
    <sequenceFlow id="_32-2-12-_32-2-3" sourceRef="_32-2-12" targetRef="_32-2-3" />
    <sequenceFlow id="_32-2-3-_32-2-4" sourceRef="_32-2-3" targetRef="_32-2-4" />
    <sequenceFlow id="_32-2-4-_32-2-5" sourceRef="_32-2-4" targetRef="_32-2-5" name="EndIter" tns:priority="10" >
      <conditionExpression xsi:type="tFormalExpression" >return true;</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="_32-2-7-_32-2-6" sourceRef="_32-2-7" targetRef="_32-2-6" />
    <sequenceFlow id="_32-2-4-_32-2-7" sourceRef="_32-2-4" targetRef="_32-2-7" tns:priority="1" >
      <conditionExpression xsi:type="tFormalExpression" >return configOK == "QUIT";</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="_32-2-4-_32-2-8" sourceRef="_32-2-4" targetRef="_32-2-8" tns:priority="3" >
      <conditionExpression xsi:type="tFormalExpression" >return configOK == "YES";</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="_32-2-2-_32-2-10" sourceRef="_32-2-2" targetRef="_32-2-10" />
    <sequenceFlow id="_32-2-8-_32-2-11" sourceRef="_32-2-8" targetRef="_32-2-11" />
    <sequenceFlow id="_32-2-13-_32-2-12" sourceRef="_32-2-13" targetRef="_32-2-12" />
    <sequenceFlow id="_32-2-1-_32-2-13" sourceRef="_32-2-1" targetRef="_32-2-13" />
    </subProcess>
    <endEvent id="_33" name="End" >
        <terminateEventDefinition/>
    </endEvent>
    <userTask id="_36" name="Results Exploration" >
      <ioSpecification>
        <dataInput id="_36_SkippableInput" name="Skippable" />
        <inputSet>
          <dataInputRefs>_36_SkippableInput</dataInputRefs>
        </inputSet>
        <outputSet>
        </outputSet>
      </ioSpecification>
      <dataInputAssociation>
        <targetRef>_36_SkippableInput</targetRef>
        <assignment>
          <from xsi:type="tFormalExpression">True</from>
          <to xsi:type="tFormalExpression">_36_SkippableInput</to>
        </assignment>
      </dataInputAssociation>
    </userTask>
    <task id="_23" name="Target HPC System?" tns:taskName="SelectTargetSystem" >
      <extensionElements>
        <tns:onExit-script scriptFormat="http://www.java.com/java">
          <script>String selSystem = (String)((WorkItemNodeInstance)kcontext.getNodeInstance()).getWorkItem().getResult("HPCSystem");
System.out.println("The chosen system is " + selSystem);

//List hpcSystems =  (List) kcontext.getVariable("hpcSystems");
if (hpcSystems == null) {
	hpcSystems = new ArrayList&lt;String&gt;();
	System.out.println("Initialized the hpcSystems: " + hpcSystems);
}
	
hpcSystems.add(selSystem);
System.out.println("Add the hpc system to the list: " + hpcSystems);
kcontext.setVariable("hpcSystems", hpcSystems);</script>
        </tns:onExit-script>
      </extensionElements>
      <ioSpecification>
        <inputSet>
        </inputSet>
        <outputSet>
        </outputSet>
      </ioSpecification>
    </task>
    <exclusiveGateway id="_29" name="More HPC Systems - Split Gateway" gatewayDirection="Diverging" />
    <exclusiveGateway id="_28" name="More HPC Systems - Join Gateway" gatewayDirection="Converging" />
    <task id="_30" name="Add more HPC Systems?" tns:taskName="AskQuestion" >
      <ioSpecification>
        <dataInput id="_30_QuestionInput" name="Question" />
        <dataInput id="_30_DefaultValueInput" name="DefaultValue" />
        <dataInput id="_30_TitleInput" name="Title" />
        <dataOutput id="_30_AnswerOutput" name="Answer" />
        <inputSet>
          <dataInputRefs>_30_QuestionInput</dataInputRefs>
          <dataInputRefs>_30_DefaultValueInput</dataInputRefs>
          <dataInputRefs>_30_TitleInput</dataInputRefs>
        </inputSet>
        <outputSet>
          <dataOutputRefs>_30_AnswerOutput</dataOutputRefs>
        </outputSet>
      </ioSpecification>
      <dataInputAssociation>
        <targetRef>_30_QuestionInput</targetRef>
        <assignment>
          <from xsi:type="tFormalExpression">Do you want to add an additional HPC system? (Yes/No)</from>
          <to xsi:type="tFormalExpression">_30_QuestionInput</to>
        </assignment>
      </dataInputAssociation>
      <dataInputAssociation>
        <targetRef>_30_DefaultValueInput</targetRef>
        <assignment>
          <from xsi:type="tFormalExpression">No</from>
          <to xsi:type="tFormalExpression">_30_DefaultValueInput</to>
        </assignment>
      </dataInputAssociation>
      <dataInputAssociation>
        <targetRef>_30_TitleInput</targetRef>
        <assignment>
          <from xsi:type="tFormalExpression">Add an additional HPC system?</from>
          <to xsi:type="tFormalExpression">_30_TitleInput</to>
        </assignment>
      </dataInputAssociation>
      <dataOutputAssociation>
        <sourceRef>_30_AnswerOutput</sourceRef>
        <targetRef>configOK</targetRef>
      </dataOutputAssociation>
    </task>

    <!-- connections -->
    <sequenceFlow id="_35-_34" sourceRef="_35" targetRef="_34" />
    <sequenceFlow id="_1-_35" sourceRef="_1" targetRef="_35" />
    <sequenceFlow id="_29-_32" sourceRef="_29" targetRef="_32" name="No" tns:priority="10" >
      <conditionExpression xsi:type="tFormalExpression" >return true;</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="_36-_33" sourceRef="_36" targetRef="_33" />
    <sequenceFlow id="_32-_36" sourceRef="_32" targetRef="_36" />
    <sequenceFlow id="_28-_23" sourceRef="_28" targetRef="_23" />
    <sequenceFlow id="_30-_29" sourceRef="_30" targetRef="_29" />
    <sequenceFlow id="_29-_28" sourceRef="_29" targetRef="_28" name="Yes" tns:priority="1" >
      <conditionExpression xsi:type="tFormalExpression" >return ( (String) configOK).toLowerCase() == "yes" ;</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="_34-_28" sourceRef="_34" targetRef="_28" />
    <sequenceFlow id="_23-_30" sourceRef="_23" targetRef="_30" />

  </process>

  <bpmndi:BPMNDiagram>
    <bpmndi:BPMNPlane bpmnElement="pathway.workflows.analysis.CrossPlatform" >
      <bpmndi:BPMNShape bpmnElement="_34" >
        <dc:Bounds x="336" y="46" width="112" height="48" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_35" >
        <dc:Bounds x="143" y="47" width="147" height="48" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_1" >
        <dc:Bounds x="44" y="49" width="48" height="48" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_32" >
        <dc:Bounds x="43" y="185" width="963" height="526" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_32-2-1" >
        <dc:Bounds x="160" y="290" width="172" height="48" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_32-2-2" >
        <dc:Bounds x="69" y="223" width="48" height="48" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_32-2-3" >
        <dc:Bounds x="158" y="499" width="176" height="48" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_32-2-4" >
        <dc:Bounds x="221" y="569" width="48" height="48" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_32-2-5" >
        <dc:Bounds x="69" y="570" width="48" height="48" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_32-2-6" >
        <dc:Bounds x="68" y="648" width="48" height="48" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_32-2-7" >
        <dc:Bounds x="163" y="646" width="165" height="48" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_32-2-8" >
        <dc:Bounds x="324" y="569" width="80" height="48" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_32-2-10" >
        <dc:Bounds x="173" y="223" width="145" height="48" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_32-2-11" >
        <dc:Bounds x="457" y="208" width="529" height="490" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_32-2-11-1" >
        <dc:Bounds x="477" y="253" width="48" height="48" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_32-2-11-2" >
        <dc:Bounds x="615" y="253" width="199" height="48" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_32-2-11-3" >
        <dc:Bounds x="474" y="321" width="483" height="121" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_32-2-11-3-2-1" >
        <dc:Bounds x="567" y="366" width="144" height="48" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_32-2-11-3-2-2" >
        <dc:Bounds x="750" y="366" width="132" height="48" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_32-2-11-3-2-3" >
        <dc:Bounds x="488" y="366" width="48" height="48" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_32-2-11-3-2-4" >
        <dc:Bounds x="904" y="366" width="48" height="48" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_32-2-11-4" >
        <dc:Bounds x="473" y="465" width="485" height="132" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_32-2-11-4-2-1" >
        <dc:Bounds x="574" y="509" width="266" height="48" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_32-2-11-4-2-2" >
        <dc:Bounds x="492" y="509" width="48" height="48" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_32-2-11-4-2-3" >
        <dc:Bounds x="888" y="511" width="48" height="48" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_32-2-11-5" >
        <dc:Bounds x="586" y="616" width="256" height="48" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_32-2-11-6" >
        <dc:Bounds x="479" y="616" width="48" height="48" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_32-2-12" >
        <dc:Bounds x="160" y="430" width="172" height="48" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_32-2-13" >
        <dc:Bounds x="159" y="360" width="173" height="48" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_33" >
        <dc:Bounds x="74" y="741" width="48" height="48" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_36" >
        <dc:Bounds x="345" y="741" width="375" height="48" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_23" >
        <dc:Bounds x="635" y="46" width="182" height="48" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_29" >
        <dc:Bounds x="502" y="117" width="48" height="48" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_28" >
        <dc:Bounds x="502" y="46" width="48" height="48" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_30" >
        <dc:Bounds x="627" y="117" width="195" height="48" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge bpmnElement="_32-2-11-3-2-3-_32-2-11-3-2-1" >
        <di:waypoint x="38" y="69" />
        <di:waypoint x="165" y="69" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="_32-2-11-3-2-1-_32-2-11-3-2-2" >
        <di:waypoint x="165" y="69" />
        <di:waypoint x="342" y="69" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="_32-2-11-3-2-2-_32-2-11-3-2-4" >
        <di:waypoint x="342" y="69" />
        <di:waypoint x="454" y="69" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="_32-2-11-4-2-2-_32-2-11-4-2-1" >
        <di:waypoint x="43" y="68" />
        <di:waypoint x="234" y="68" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="_32-2-11-4-2-1-_32-2-11-4-2-3" >
        <di:waypoint x="234" y="68" />
        <di:waypoint x="439" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="_32-2-11-1-_32-2-11-2" >
        <di:waypoint x="44" y="69" />
        <di:waypoint x="257" y="69" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="_32-2-11-2-_32-2-11-3" >
        <di:waypoint x="257" y="69" />
        <di:waypoint x="258" y="173" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="_32-2-11-3-_32-2-11-4" >
        <di:waypoint x="258" y="173" />
        <di:waypoint x="258" y="323" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="_32-2-11-4-_32-2-11-5" >
        <di:waypoint x="258" y="323" />
        <di:waypoint x="257" y="432" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="_32-2-11-5-_32-2-11-6" >
        <di:waypoint x="257" y="432" />
        <di:waypoint x="46" y="432" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="_32-2-10-_32-2-1" >
        <di:waypoint x="202" y="62" />
        <di:waypoint x="203" y="129" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="_32-2-12-_32-2-3" >
        <di:waypoint x="203" y="269" />
        <di:waypoint x="203" y="338" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="_32-2-3-_32-2-4" >
        <di:waypoint x="203" y="338" />
        <di:waypoint x="202" y="408" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="_32-2-4-_32-2-5" >
        <di:waypoint x="202" y="408" />
        <di:waypoint x="50" y="409" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="_32-2-7-_32-2-6" >
        <di:waypoint x="202" y="485" />
        <di:waypoint x="49" y="487" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="_32-2-4-_32-2-7" >
        <di:waypoint x="202" y="408" />
        <di:waypoint x="202" y="485" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="_32-2-4-_32-2-8" >
        <di:waypoint x="202" y="408" />
        <di:waypoint x="321" y="408" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="_32-2-2-_32-2-10" >
        <di:waypoint x="50" y="62" />
        <di:waypoint x="202" y="62" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="_32-2-8-_32-2-11" >
        <di:waypoint x="321" y="408" />
        <di:waypoint x="365" y="454" />
        <di:waypoint x="678" y="268" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="_32-2-13-_32-2-12" >
        <di:waypoint x="202" y="199" />
        <di:waypoint x="203" y="269" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="_32-2-1-_32-2-13" >
        <di:waypoint x="203" y="129" />
        <di:waypoint x="202" y="199" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="_35-_34" >
        <di:waypoint x="216" y="71" />
        <di:waypoint x="392" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="_1-_35" >
        <di:waypoint x="68" y="73" />
        <di:waypoint x="216" y="71" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="_29-_32" >
        <di:waypoint x="526" y="141" />
        <di:waypoint x="524" y="448" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="_36-_33" >
        <di:waypoint x="532" y="765" />
        <di:waypoint x="98" y="765" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="_32-_36" >
        <di:waypoint x="524" y="448" />
        <di:waypoint x="532" y="765" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="_28-_23" >
        <di:waypoint x="526" y="70" />
        <di:waypoint x="726" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="_30-_29" >
        <di:waypoint x="724" y="141" />
        <di:waypoint x="526" y="141" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="_29-_28" >
        <di:waypoint x="526" y="141" />
        <di:waypoint x="526" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="_34-_28" >
        <di:waypoint x="392" y="70" />
        <di:waypoint x="526" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="_23-_30" >
        <di:waypoint x="726" y="70" />
        <di:waypoint x="724" y="141" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>

</definitions>